<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trang chủ</title>
</head>
<body>
<th:block th:replace="header.html"></th:block>
<section>
    <div class="container_section">
        <div class="image-slider">
            <img th:src="@{/images/product/background.png}">
            <img th:src="@{/images/product/background2.png}">
        </div>
    </div>
</section>
<nav>
    <div class="container_nav">
        <div class="nav_left">
            <img th:src="@{/images/product/anhHoa4.png}">
        </div>

        <div class="nav_right">
            <div class="flowerImageLeft">
                <img th:src="@{/images/product/anhHoa.png}">
                <img th:src="@{/images/product/anhHoa2.png}">
            </div>
            <div class="flowerImageRight">
                <img th:src="@{/images/product/anhHoa3.png}">
            </div>
        </div>
    </div>

    <div class="container_nav2">
        <div class="panner">
            <img th:src="@{/images/product/anhHoa5.png}">
        </div>
        <div class="panner2">
            <img th:src="@{/images/product/anhHoa6.png}">
        </div>
    </div>
    <div class="container_product">
        <div class="div_product" id="productContainer">
<!--            <ul class="product" id="product">-->
<!--            </ul>-->
        </div>
    </div>
    <div class="video-container">
        <div class="video">
        <video controls>
            <source th:src="@{/images/product/clip.mp4}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        </div>
    </div>
    <div class="trending">
        <img th:src="@{/images/product/trending.png}">
    </div>
    <div class="trend">
        <img th:src="@{/images/product/trend.png}">
    </div>
</nav>
</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const imageSlider = document.querySelector('.image-slider');

        function nextSlide() {
            const firstSlide = imageSlider.firstElementChild;
            imageSlider.style.transition = 'transform 1s ease-in-out';
            imageSlider.style.transform = `translateX(-${firstSlide.offsetWidth}px)`;
            setTimeout(function () {
                imageSlider.appendChild(firstSlide);
                imageSlider.style.transition = 'none';
                imageSlider.style.transform = 'translateX(0)';
            }, 1000);
        }

        setInterval(nextSlide, 5000);
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const productContainer = document.getElementById('productContainer');

        // Gọi API
        fetch('/api/product')
            .then(response => response.json())
            .then(products => {
                // Xử lý dữ liệu trả về
                renderProducts(products);
                enableProductSlider();
            })
            .catch(error => {
                console.error('Error fetching product data:', error);
            });

        // Hàm để hiển thị dữ liệu trong phần tử có id='productContainer'
        function renderProducts(products) {
            products.forEach((product, index) => {
                const productElement = document.createElement('div');
                productElement.className = 'product';

                const productImage = document.createElement('img');
                productImage.src = '/images/product/' + product.image1;
                productImage.className = 'imageProduct';
                productElement.appendChild(productImage);

                const productInfo = document.createElement('div');
                productInfo.innerHTML = `<h3>${product.name}</h3><p>${product.price}</p>`;
                productElement.appendChild(productInfo);

                productContainer.appendChild(productElement);

                // Ẩn tất cả sản phẩm ngoại trừ 4 sản phẩm đầu tiên
                if (index >= 4) {
                    productElement.style.display = 'none';
                }
            });
        }

        function enableProductSlider() {
            const productElements = document.querySelectorAll('.product');
            let currentIndex = 0;

            function showNextProducts() {
                // Ẩn tất cả sản phẩm
                productElements.forEach(element => {
                    element.style.display = 'none';
                });

                // Hiển thị 4 sản phẩm tiếp theo
                for (let i = 0; i < 4; i++) {
                    const nextIndex = (currentIndex + i) % productElements.length;
                    productElements[nextIndex].style.display = 'inline-block';
                }

                currentIndex = (currentIndex + 4) % productElements.length;
            }

            // Lướt qua tự động sau mỗi 5 giây
            setInterval(showNextProducts, 1000);
        }
    });
</script>
</html>